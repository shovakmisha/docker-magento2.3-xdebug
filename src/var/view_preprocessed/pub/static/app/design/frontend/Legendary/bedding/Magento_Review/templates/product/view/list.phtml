<?php /** @var Legendary\Review\Block\Product\View\ListView $block */ /** @var \Magento\Framework\View\Helper\SecureHtmlRenderer $secureRenderer */ $_items = $block->getReviewsCollection()->getItems(); $format = $block->getDateFormat() ?: \IntlDateFormatter::MEDIUM; $_ratingSummary = $block->getRatingSummary($block->getProduct()->getSku()); ?> <?php if (count($_items)): ?> <div class="block review-list" id="customer-reviews"><div class="review-list--top"><?php if (!$block->getHideTitle()): ?> <div class="block-title"><strong><?= $block->escapeHtml(__('Customer Reviews')) ?></strong></div><?php endif ?> <?php if($_ratingSummary){ ?> <div class="review-list--rating--wrap"><strong class="review-list--rating"><?= $block->escapeHtml(__('Rating')) ?></strong> <div class="product-reviews-summary short"><div class="rating-summary"><div title="<?php echo (int)$_ratingSummary; ?>%" class="rating-result"><span style="width:<?php echo (int)$_ratingSummary; ?>%"><span><?php echo (int)$_ratingSummary; ?>%</span></span></div></div></div></div><?php } ?></div><div class="reviews-actions"><a class="action add" href="#review-form" data-mage-init='{"Magento_Review/js/common": {}}'><?= $block->escapeHtml(__('Write your own review')) ?></a></div><div class="block-content"><div class="toolbar review-toolbar"><?= $block->getChildHtml('toolbar') ?></div><ol class="items review-items"><?php foreach ($_items as $_review): ?> <li class="item review-item" itemscope itemprop="review" itemtype="http://schema.org/Review"><div class="review-content" itemprop="description"><?= /* @noEscape */ nl2br($block->escapeHtml($_review->getDetail())) ?></div><a class="read-whole-review"><span><?= $block->escapeHtml(__('Read whole review')) ?></span> <span>&#8594;</span></a> <div class="review-details"><p class="review-author"><strong class="review-details-value" itemprop="author"><?= $block->escapeHtml($_review->getNickname()) ?></strong></p><p class="review-date"><span class="review-details-label"><?= $block->escapeHtml(__('Posted on')) ?></span> <time class="review-details-value" itemprop="datePublished" datetime="<?= $block->escapeHtmlAttr($block->formatDate( $_review->getCreatedAt(), $format )) ?>"><?= $block->escapeHtml($block->formatDate($_review->getCreatedAt(), $format)) ?></time></p></div></li> <?php endforeach; ?></ol><div class="toolbar review-toolbar"><?= $block->getChildHtml('toolbar') ?></div></div></div><?php endif;?>